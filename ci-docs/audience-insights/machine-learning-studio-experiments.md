---
title: Algoritmiskās mācīšanās studijas (klasiskais) eksperimenti
description: Izmantojiet Azure algoritmiskās mācības (klasiskais) modeļus programmā Dynamics 365 Customer Insights.
ms.date: 12/03/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: conceptual
author: m-hartmann
ms.author: mhart
ms.reviewer: ameetj
manager: shellyha
ms.openlocfilehash: 556b6810db0ed2733a3f086291757bd85b77e371
ms.sourcegitcommit: a9b2cf598f256d07a48bba8617347ee90024a1dd
ms.translationtype: HT
ms.contentlocale: lv-LV
ms.lasthandoff: 12/03/2020
ms.locfileid: "4669027"
---
# <a name="use-models-based-on-azure-machine-learning-studio-classic"></a><span data-ttu-id="a61c0-103">Izmantojiet Azure algoritmiskās mācības studijas (klasiskais) modeļus programmā .</span><span class="sxs-lookup"><span data-stu-id="a61c0-103">Use models based on Azure Machine Learning Studio (classic)</span></span>

<span data-ttu-id="a61c0-104">Vienotie dati Dynamics 365 Customer Insights ir avots, kas paredzēts algoritmiskās mācīšanās modeļu izveidei, kas var radīt papildu biznesa ieskatus.</span><span class="sxs-lookup"><span data-stu-id="a61c0-104">The unified data in Dynamics 365 Customer Insights is a source for building machine learning models that can generate additional business insights.</span></span> <span data-ttu-id="a61c0-105">Customer Insights integrējas ar algoritmiskās mācīšanās studiju (klasiskais) un Azure algoritmisko mācīšanos, lai izmantotu savus pielāgotos modeļus.</span><span class="sxs-lookup"><span data-stu-id="a61c0-105">Customer Insights integrates with Machine Learning Studio (classic) to use your own custom models.</span></span> <span data-ttu-id="a61c0-106">Lai uzzinātu, kā Azure algoritmiskā mācīšanās izstrādātie modeļi ir integrēti ar Customer Insights, skatiet sadaļu [Azure algoritmiskās mācīšanās eksperimenti](azure-machine-learning-experiments.md).</span><span class="sxs-lookup"><span data-stu-id="a61c0-106">To see how models developed in Azure Machine Learning are integrated with Customer Insights, see [Azure Machine Learning experiments](azure-machine-learning-experiments.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="a61c0-107">Priekšnosacījumi</span><span class="sxs-lookup"><span data-stu-id="a61c0-107">Prerequisites</span></span>

- <span data-ttu-id="a61c0-108">Piekļuve Customer Insights</span><span class="sxs-lookup"><span data-stu-id="a61c0-108">Access to Customer Insights</span></span>
- <span data-ttu-id="a61c0-109">Aktīvs Azure Enterprise abonements</span><span class="sxs-lookup"><span data-stu-id="a61c0-109">Active Azure Enterprise subscription</span></span>
- [<span data-ttu-id="a61c0-110">Vienoti klientu profili</span><span class="sxs-lookup"><span data-stu-id="a61c0-110">Unified customer profiles</span></span>](data-unification.md)
- <span data-ttu-id="a61c0-111">[Entītijas eksportēšanas uz Azure Blob krātuvi](export-azure-blob-storage.md) iestatīšana</span><span class="sxs-lookup"><span data-stu-id="a61c0-111">[Entity export to Azure Blob storage](export-azure-blob-storage.md) set up</span></span>

## <a name="set-up-machine-learning-studio-classic"></a><span data-ttu-id="a61c0-112">Algoritmiskā mācīšanās studijas (klasiskais) iestatīšana</span><span class="sxs-lookup"><span data-stu-id="a61c0-112">Set up Machine Learning Studio Classic</span></span>

<span data-ttu-id="a61c0-113">Vispirms ir jāizveido darbvieta un jāatver algoritmiskās mācīšanās studija (klasiskais).</span><span class="sxs-lookup"><span data-stu-id="a61c0-113">In a first step, we need to create a workspace for and open the Machine Learning Studio (classic).</span></span>

1. <span data-ttu-id="a61c0-114">Dodieties uz [https://www.portal.azure.com](https://www.portal.azure.com/) un pierakstieties.</span><span class="sxs-lookup"><span data-stu-id="a61c0-114">Go to [https://www.portal.azure.com](https://www.portal.azure.com/) and sign in.</span></span>

1. <span data-ttu-id="a61c0-115">Atlasiet **Resursa izveide**.</span><span class="sxs-lookup"><span data-stu-id="a61c0-115">Select **Create a resource**.</span></span>

1. <span data-ttu-id="a61c0-116">Meklējiet **Algoritmiskās mācīšanās studijas darbvieta** un atlasiet **Izveidot**.</span><span class="sxs-lookup"><span data-stu-id="a61c0-116">Search **Machine Learning Studio Workspace** and select **Create**.</span></span>

1. <span data-ttu-id="a61c0-117">Ievadiet nepieciešamo informāciju, lai [izveidotu darbvietu](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace).</span><span class="sxs-lookup"><span data-stu-id="a61c0-117">Enter the required details to [create the workspace](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace).</span></span> <span data-ttu-id="a61c0-118">Izvēlieties **Tīmekļa servisa plāna cenas rindu**, pamatojoties uz importējamo datu apjomu.</span><span class="sxs-lookup"><span data-stu-id="a61c0-118">Choose the **Web service plan pricing tier** based on the amount of data you plan to import.</span></span> <span data-ttu-id="a61c0-119">Lai iegūtu vislabākos rezultātus, atlasiet **Atrašanās vietu**, kas jums ģeogrāfiski ir vistuvāk.</span><span class="sxs-lookup"><span data-stu-id="a61c0-119">For best performance, select the **Location** that is geographically closest to you.</span></span>

1. <span data-ttu-id="a61c0-120">Pēc resursa izveides tiks parādīts algoritmiskās mācīšanās studijas darbvietas informācijas panelis.</span><span class="sxs-lookup"><span data-stu-id="a61c0-120">After creating the resource, the Machine Learning Studio workspace dashboard will appear.</span></span> <span data-ttu-id="a61c0-121">Atlasiet **Palaist algoritmiskās mācīšanās studiju**.</span><span class="sxs-lookup"><span data-stu-id="a61c0-121">Select **Launch Machine Learning Studio**.</span></span>

   ![Azure algoritmiskās mācīšanās studijas lietotāja interfeiss](media/azure-machine-learning-studio.png)

## <a name="work-with-azure-machine-learning-studio"></a><span data-ttu-id="a61c0-123">Darbs ar Azure algoritmiskās mācīšanās studiju</span><span class="sxs-lookup"><span data-stu-id="a61c0-123">Work with Azure Machine Learning Studio</span></span>

<span data-ttu-id="a61c0-124">Tagad varat izveidot jaunu eksperimentu vai importēt esošu eksperimenta veidni no paraugu galerijas.</span><span class="sxs-lookup"><span data-stu-id="a61c0-124">You can now create a new experiment, or import an existing experiment template from the sample gallery.</span></span> <span data-ttu-id="a61c0-125">Ir parauga eksperimenti ar trim standarta scenārijiem:</span><span class="sxs-lookup"><span data-stu-id="a61c0-125">There are sample experiments for three standard scenarios:</span></span>

- [<span data-ttu-id="a61c0-126">Zuduma prognoze</span><span class="sxs-lookup"><span data-stu-id="a61c0-126">Churn prediction</span></span>](#churn-analysis)

- [<span data-ttu-id="a61c0-127">Klienta ilgtermiņa vērtība</span><span class="sxs-lookup"><span data-stu-id="a61c0-127">Customer lifetime value</span></span>](#customer-lifetime-value-prediction)

- [<span data-ttu-id="a61c0-128">Produkta ieteikums vai nākamā labākā darbība</span><span class="sxs-lookup"><span data-stu-id="a61c0-128">Product recommendation or next best action</span></span>](#productrecommendation-or-next-best-action)

1. <span data-ttu-id="a61c0-129">Ja izveidojat jaunu eksperimentu vai izmantojat eksperimenta veidni no galerijas, jums ir jākonfigurē **Datu importēšanas** rekvizīti.</span><span class="sxs-lookup"><span data-stu-id="a61c0-129">If you create a new experiment or use an experiment template from the gallery, you need to configure the **Import Data** properties.</span></span> <span data-ttu-id="a61c0-130">Izmantojiet vadīto pieredzi vai tieši sniedziet detalizētu informāciju, lai piekļūtu Azure BLOB krātuvei, kurā ir jūsu dati.</span><span class="sxs-lookup"><span data-stu-id="a61c0-130">Use the guided experience or directly provide details to access the Azure Blob Storage that contains your data.</span></span>  

   ![Azure algoritmiskās mācīšanās studijas eksperiments](media/azure-machine-learning-studio-experiment.png)

1. <span data-ttu-id="a61c0-132">Tagad varat izveidot pielāgotu apstrādes konveijeru, lai notīrītu un pirmsapstrādātu datus, izvilktu līdzekļus un apmācītu piemēroto modeli.</span><span class="sxs-lookup"><span data-stu-id="a61c0-132">Now you can build a custom processing pipeline to clean and preprocess the data, extract features, and train a suitable model.</span></span>

1. <span data-ttu-id="a61c0-133">Pārbaudiet un optimizējiet modeļa sniegumu.</span><span class="sxs-lookup"><span data-stu-id="a61c0-133">Test and optimize the model performance.</span></span>

1. <span data-ttu-id="a61c0-134">Kad jūs apmierina modeļa kvalitāte, atlasiet **Iestatīt tīmekļa pakalpojumu** > **Predikatīvais tīmekļa pakalpojums**.</span><span class="sxs-lookup"><span data-stu-id="a61c0-134">When you’re satisfied with the quality of a model, select **Set up web service** > **Predictive Web Service**.</span></span> <span data-ttu-id="a61c0-135">Šī opcija importē apmācīto modeli un līdzekļu konveijeru no apmācību eksperimenta uz predikatīvo pakalpojumu.</span><span class="sxs-lookup"><span data-stu-id="a61c0-135">This option imports the trained model and the featurization pipeline from the training experiment to a predictive service.</span></span> <span data-ttu-id="a61c0-136">Predikatīvais pakalpojums var izmantot citu ievades datu kopu ar sistēmu, kas izmantota eksperimenta apmācībā prognožu veikšanai.</span><span class="sxs-lookup"><span data-stu-id="a61c0-136">The predictive service can take another set of input data with the schema used in the training experiment to make predictions.</span></span>

   ![Predikatīvā tīmekļa pakalpojuma iestatīšana](media/predictive-webservice-control.png)

1. <span data-ttu-id="a61c0-138">Kolīdz predikatīvais tīmekļa pakalpojuma eksperiments ir izdevies, jūs varat to izmantot automātiskai plānošanai.</span><span class="sxs-lookup"><span data-stu-id="a61c0-138">Once the predictive web service experiment is successful, you can deploy it for auto scheduling.</span></span> <span data-ttu-id="a61c0-139">Lai tīmekļa pakalpojums darbotos kopā ar Customer Insights, atlasiet **Izmantot tīmekļa pakalpojumu** > **Izmantot tīmekļa pakalpojuma (jauns) priekšskatījumu**.</span><span class="sxs-lookup"><span data-stu-id="a61c0-139">To have the web service work with Customer Insights, select **Deploy Web Service** > **Deploy Web Service [New] Preview**.</span></span> <span data-ttu-id="a61c0-140">[Papildinformācija par tīmekļa pakalpojuma izmantošanu](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service)</span><span class="sxs-lookup"><span data-stu-id="a61c0-140">[Learn more about deploying a web service](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span></span>

   ![Predikatīvā tīmekļa pakalpojuma izmantošana](media/predictive-webservice-deploy.png)

## <a name="sample-models-from-the-gallery"></a><span data-ttu-id="a61c0-142">Paraugu modeļi no galerijas</span><span class="sxs-lookup"><span data-stu-id="a61c0-142">Sample models from the gallery</span></span>

<span data-ttu-id="a61c0-143">Šī raksta modeļiem izmantosim fiktīvu Contoso Hotel scenāriju.</span><span class="sxs-lookup"><span data-stu-id="a61c0-143">We'll use a fictitious scenario of Contoso Hotel for the models in this article.</span></span> <span data-ttu-id="a61c0-144">Contoso Hotel apkopo šādus datus:</span><span class="sxs-lookup"><span data-stu-id="a61c0-144">Contoso Hotel gathers the following data:</span></span>

- <span data-ttu-id="a61c0-145">CRM dati, kas sastāv no viesnīcas uzturēšanās darbības.</span><span class="sxs-lookup"><span data-stu-id="a61c0-145">CRM data consisting of hotel stay activity.</span></span> <span data-ttu-id="a61c0-146">Datu kopa ietver informāciju par uzturēšanās datiem katram reģistrētajam klientam.</span><span class="sxs-lookup"><span data-stu-id="a61c0-146">The data set includes information about the dates of stay for each registered customer.</span></span> <span data-ttu-id="a61c0-147">Tajā arī ietverta informācija par rezervējumu, numuru veidiem, tēriņu informācija un tā tālāk.</span><span class="sxs-lookup"><span data-stu-id="a61c0-147">It also contains information about the booking, room types, details of spend, and so on.</span></span> <span data-ttu-id="a61c0-148">Dati aptver četrus gadus — no 2014. gada janvāra līdz 2018. gada janvārim.</span><span class="sxs-lookup"><span data-stu-id="a61c0-148">The data spans four years, from January 2014 to January 2018.</span></span>
- <span data-ttu-id="a61c0-149">Viesnīcas viesu klientu profili.</span><span class="sxs-lookup"><span data-stu-id="a61c0-149">Customer profiles of hotel guests.</span></span> <span data-ttu-id="a61c0-150">Šie profili satur informāciju par katru klientu, tostarp viņu vārdu un uzvārdu, dzimšanas datumu, pasta adresi, dzimumu un tālruņa numuru.</span><span class="sxs-lookup"><span data-stu-id="a61c0-150">These profiles contain information about each customer, including their name, birthdate, postal address, gender, and phone number.</span></span>
- <span data-ttu-id="a61c0-151">Viesnīcas piedāvāto pakalpojumu, piemēram, spa, veļas mazgātavas, WiFi vai kurjera, izmantojums.</span><span class="sxs-lookup"><span data-stu-id="a61c0-151">Usage of services offered by the hotel, such as the spa, laundry, WiFi, or courier.</span></span> <span data-ttu-id="a61c0-152">Šī informācija tiek reģistrēta katram reģistrētajam klientam.</span><span class="sxs-lookup"><span data-stu-id="a61c0-152">This information is logged for each registered customer.</span></span> <span data-ttu-id="a61c0-153">Parasti pakalpojumu izmantošana ir saistīta ar uzturēšanos.</span><span class="sxs-lookup"><span data-stu-id="a61c0-153">Typically, use of services is linked with the stay.</span></span> <span data-ttu-id="a61c0-154">Dažos gadījumos pakalpojumus var izmantot klienti, kuri viesnīcā nemitinās.</span><span class="sxs-lookup"><span data-stu-id="a61c0-154">In some cases, services can be used by customers without staying in the hotel.</span></span>

## <a name="churn-analysis"></a><span data-ttu-id="a61c0-155">Zuduma analīze</span><span class="sxs-lookup"><span data-stu-id="a61c0-155">Churn Analysis</span></span>

<span data-ttu-id="a61c0-156">Zuduma analīze attiecas uz dažādām biznesa jomām.</span><span class="sxs-lookup"><span data-stu-id="a61c0-156">Churn analysis applies to different business areas.</span></span> <span data-ttu-id="a61c0-157">Šajā piemērā mēs aplūkosim pakalpojuma zudumu, jo īpaši augstāk aprakstīto viesnīcas pakalpojumu kontekstā.</span><span class="sxs-lookup"><span data-stu-id="a61c0-157">In this example, we’re going to look at service churn, specifically in the context of hotel services as described above.</span></span> <span data-ttu-id="a61c0-158">Tajā sniegts darba piemērs gala modeļa konveijeram, kuru var izmantot kā sākumpunktu jebkura cita veida zuduma modelim.</span><span class="sxs-lookup"><span data-stu-id="a61c0-158">It provides a working example of an end–to–end model pipeline that can be used as a starting point for any other type of churn model.</span></span>

### <a name="definition-of-churn"></a><span data-ttu-id="a61c0-159">Zuduma definīcija</span><span class="sxs-lookup"><span data-stu-id="a61c0-159">Definition of Churn</span></span>

<span data-ttu-id="a61c0-160">Zuduma definīcija var atšķirties atkarībā no scenārija.</span><span class="sxs-lookup"><span data-stu-id="a61c0-160">The definition of churn can differ based on the scenario.</span></span> <span data-ttu-id="a61c0-161">Piemēram, viesi, kurš nav viesnīcu apmeklējis pēdējā gada laikā, vajadzētu marķēt kā zudušu.</span><span class="sxs-lookup"><span data-stu-id="a61c0-161">In this example, a guest who hasn’t visited the hotel in the past year should be labeled as churned.</span></span>  

<span data-ttu-id="a61c0-162">Eksperimenta veidni var importēt no galerijas.</span><span class="sxs-lookup"><span data-stu-id="a61c0-162">The experiment template can be imported from the gallery.</span></span> <span data-ttu-id="a61c0-163">Vispirms nodrošiniet, ka no Azure Blob krātuves importējat datus **Viesnīcas uzturēšanas darbībai**, **Klientu datiem** un **Pakalpojuma lietojuma datiem**.</span><span class="sxs-lookup"><span data-stu-id="a61c0-163">First, ensure that you import the data for **Hotel Stay Activity**, **Customer data**, and **Service Usage Data** from Azure Blob storage.</span></span>

   ![Datu importēšana zuduma modelim](media/import-data-azure-blob-storage.png)

### <a name="featurization"></a><span data-ttu-id="a61c0-165">Līdzekļu izmantošana</span><span class="sxs-lookup"><span data-stu-id="a61c0-165">Featurization</span></span>

<span data-ttu-id="a61c0-166">Pamatojoties uz zuduma definīciju, mēs vispirms identificējam neapstrādātos līdzekļus, kuri ietekmēs etiķeti.</span><span class="sxs-lookup"><span data-stu-id="a61c0-166">Based on the definition of churn, we first identify the raw features that will influence the label.</span></span> <span data-ttu-id="a61c0-167">Pēc tam mēs apstrādāsim šos neapstrādātos līdzekļus, lai veidotu skaitliskus līdzekļus, kurus var izmantot algoritmiskās mācīšanās modeļos.</span><span class="sxs-lookup"><span data-stu-id="a61c0-167">Then, we process these raw features into numerical features that can be used with machine learning models.</span></span> <span data-ttu-id="a61c0-168">Datu integrācija notiek ar Customer Insights, lai šīs tabulas varētu pievienot, izmantojot *Klienta ID*.</span><span class="sxs-lookup"><span data-stu-id="a61c0-168">Data integration happens in Customer Insights so we can join these tables by using the *Customer ID*.</span></span>

   ![Importēto datu apvienošana](media/join-imported-data.png)

<span data-ttu-id="a61c0-170">Līdzekļu izveide modeļa veidošanai zuduma analīzei var būt nedaudz sarežģīta.</span><span class="sxs-lookup"><span data-stu-id="a61c0-170">The featurization for building the model for churn analysis can be a little tricky.</span></span> <span data-ttu-id="a61c0-171">Dati ir laika funkcija ar jaunu viesnīcas darbību, kas tiek fiksēta katru dienu.</span><span class="sxs-lookup"><span data-stu-id="a61c0-171">The data is a function of time with new hotel activity recorded on daily basis.</span></span> <span data-ttu-id="a61c0-172">Līdzekļu izveides laikā mēs vēlamies ģenerēt statiskus līdzekļus no dinamiskiem datiem.</span><span class="sxs-lookup"><span data-stu-id="a61c0-172">During featurization, we want to generate static features from the dynamic data.</span></span> <span data-ttu-id="a61c0-173">Šajā gadījumā mēs ģenerējam vairākus līdzekļus no viesnīcas darbības ar viena gada slīdošo logu.</span><span class="sxs-lookup"><span data-stu-id="a61c0-173">In this case, we generate multiple features from hotel activity with a sliding window of one year.</span></span> <span data-ttu-id="a61c0-174">Mēs arī izvēršam kategorijas līdzekļus, piemēram, numura veidu vai rezervācijas veidu atsevišķos līdzekļos, izmantojot viena karsto kodēšanu.</span><span class="sxs-lookup"><span data-stu-id="a61c0-174">We also expand the categorical features like room type or booking type into separate features using one-hot encoding.</span></span>  

<span data-ttu-id="a61c0-175">Līdzekļu galīgais skats:</span><span class="sxs-lookup"><span data-stu-id="a61c0-175">Final list of features:</span></span>

| <span data-ttu-id="a61c0-176">**Skaitlis**</span><span class="sxs-lookup"><span data-stu-id="a61c0-176">**Number**</span></span>  | <span data-ttu-id="a61c0-177">**Original_Column**</span><span class="sxs-lookup"><span data-stu-id="a61c0-177">**Original_Column**</span></span>          | <span data-ttu-id="a61c0-178">**Atvasinātie līdzekļi**</span><span class="sxs-lookup"><span data-stu-id="a61c0-178">**Derived Features**</span></span>                                                                                                                      |
|-------------|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="a61c0-179">1</span><span class="sxs-lookup"><span data-stu-id="a61c0-179">1</span></span>           | <span data-ttu-id="a61c0-180">Numura veids</span><span class="sxs-lookup"><span data-stu-id="a61c0-180">Room Type</span></span>                    | <span data-ttu-id="a61c0-181">RoomTypeLargeCount, RoomTypeSmallCount</span><span class="sxs-lookup"><span data-stu-id="a61c0-181">RoomTypeLargeCount, RoomTypeSmallCount</span></span>                                                                                                    |
| <span data-ttu-id="a61c0-182">2</span><span class="sxs-lookup"><span data-stu-id="a61c0-182">2</span></span>           | <span data-ttu-id="a61c0-183">Rezervācijas tips</span><span class="sxs-lookup"><span data-stu-id="a61c0-183">Booking Type</span></span>                 | <span data-ttu-id="a61c0-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span><span class="sxs-lookup"><span data-stu-id="a61c0-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span></span>                                                                                         |
| <span data-ttu-id="a61c0-185">3</span><span class="sxs-lookup"><span data-stu-id="a61c0-185">3</span></span>           | <span data-ttu-id="a61c0-186">Ceļošanas kategorija</span><span class="sxs-lookup"><span data-stu-id="a61c0-186">Travel Category</span></span>              | <span data-ttu-id="a61c0-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span><span class="sxs-lookup"><span data-stu-id="a61c0-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span></span>                                                                                   |
| <span data-ttu-id="a61c0-188">4</span><span class="sxs-lookup"><span data-stu-id="a61c0-188">4</span></span>           | <span data-ttu-id="a61c0-189">Iztērētie dolāri</span><span class="sxs-lookup"><span data-stu-id="a61c0-189">Dollars Spent</span></span>                | <span data-ttu-id="a61c0-190">TotalDollarSpent</span><span class="sxs-lookup"><span data-stu-id="a61c0-190">TotalDollarSpent</span></span>                                                                                                                          |
| <span data-ttu-id="a61c0-191">5</span><span class="sxs-lookup"><span data-stu-id="a61c0-191">5</span></span>           | <span data-ttu-id="a61c0-192">Reģistrēšanās un izrakstīšanās datumi</span><span class="sxs-lookup"><span data-stu-id="a61c0-192">Check-in and Checkout dates</span></span>  | <span data-ttu-id="a61c0-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span><span class="sxs-lookup"><span data-stu-id="a61c0-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span></span> <span data-ttu-id="a61c0-194">StayCount2015, StayCount2014</span><span class="sxs-lookup"><span data-stu-id="a61c0-194">StayCount2015, StayCount2014</span></span>                |
| <span data-ttu-id="a61c0-195">6</span><span class="sxs-lookup"><span data-stu-id="a61c0-195">6</span></span>           | <span data-ttu-id="a61c0-196">Servisa lietojums</span><span class="sxs-lookup"><span data-stu-id="a61c0-196">Service Usage</span></span>                | <span data-ttu-id="a61c0-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span><span class="sxs-lookup"><span data-stu-id="a61c0-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span></span>  |

### <a name="model-selection"></a><span data-ttu-id="a61c0-198">Modeļa atlase</span><span class="sxs-lookup"><span data-stu-id="a61c0-198">Model selection</span></span>

<span data-ttu-id="a61c0-199">Tagad mums ir jāizvēlas optimālais lietojamais algoritms.</span><span class="sxs-lookup"><span data-stu-id="a61c0-199">Now we need to choose the optimal algorithm to use.</span></span> <span data-ttu-id="a61c0-200">Šajā gadījumā vairums līdzekļu ir balstīti kategorijas līdzekļos.</span><span class="sxs-lookup"><span data-stu-id="a61c0-200">In this case, most features are based on categorical features.</span></span> <span data-ttu-id="a61c0-201">Parasti lēmumu kokā balstītie modeļi darbojas labi.</span><span class="sxs-lookup"><span data-stu-id="a61c0-201">Typically, decision tree–based models work well.</span></span> <span data-ttu-id="a61c0-202">Ja ir tikai skaitliski līdzekļi, neironu tīkli varētu būt labāka izvēle.</span><span class="sxs-lookup"><span data-stu-id="a61c0-202">If there are only numerical features, neural networks could be a better choice.</span></span> <span data-ttu-id="a61c0-203">Atbalsta vektoru mašīna (SVM) arī ir labs kandidāts šādās situācijās; tomēr ir nepieciešama neliela saskaņošana, lai iegūtu labākos rezultātus.</span><span class="sxs-lookup"><span data-stu-id="a61c0-203">Support vector machine (SVM) also is a good candidate in such situations; however, it needs quite a bit of tuning to extract the best performance.</span></span> <span data-ttu-id="a61c0-204">Mēs izvēlamies **Divu klašu stiprināto lēmuma koku** kā pirmo modeli, kam seko **Divu klašu SVM** kā otrais modelis.</span><span class="sxs-lookup"><span data-stu-id="a61c0-204">We choose **Two-Class Boosted Decision Tree** as the first model of choice followed by **Two-Class SVM** as the second model.</span></span> <span data-ttu-id="a61c0-205">Azure algoritmiskās mācīšanās studija ļauj veikt A/B testēšanu, tāpēc ir labi sākt ar diviem modeļiem, nevis vienu.</span><span class="sxs-lookup"><span data-stu-id="a61c0-205">Azure Machine Learning Studio lets you do A/B testing, so it’s beneficial to start with two models rather than one.</span></span>

<span data-ttu-id="a61c0-206">Šajā attēlā parādīts modeļa apmācības un novērtēšanas konveijers Azure algoritmiskās mācīšanās studijai:</span><span class="sxs-lookup"><span data-stu-id="a61c0-206">The following image shows the model training and evaluation pipeline from Azure Machine Learning Studio:</span></span>

![Zuduma modelis Azure algoritmiskās mācīšanās studijā](media/azure-machine-learning-model.png)

<span data-ttu-id="a61c0-208">Mēs arī izmantojam tehniku, ko sauc par **Permutācijas līdzekļa svarīgumu**, kas ir būtisks modeļa optimizācijas aspekts.</span><span class="sxs-lookup"><span data-stu-id="a61c0-208">We also apply a technique called **Permutation Feature Importance**, an important aspect of model optimization.</span></span> <span data-ttu-id="a61c0-209">Iebūvētajiem modeļiem ir mazs vai nekāds ieskats jebkura konkrētā līdzekļa ietekmē uz gala prognozi.</span><span class="sxs-lookup"><span data-stu-id="a61c0-209">Built-in models have little to no insight into the impact of any specific feature on the final prediction.</span></span> <span data-ttu-id="a61c0-210">Līdzekļa svarīguma kalkulators izmanto pielāgotu algoritmu, lai aprēķinātu atsevišķu līdzekļu ietekmi uz konkrēta modeļa iznākumu.</span><span class="sxs-lookup"><span data-stu-id="a61c0-210">The feature importance calculator uses a custom algorithm to compute the influence of individual features on the outcome for a specific model.</span></span> <span data-ttu-id="a61c0-211">Līdzekļa svarīgums ir normalizēts starp +1 un -1.</span><span class="sxs-lookup"><span data-stu-id="a61c0-211">The feature importance is normalized between +1 to -1.</span></span> <span data-ttu-id="a61c0-212">Negatīva ietekme nozīmē, ka atbilstošajam līdzeklim ir pretēja ietekme uz iznākumu un tas ir jāizņem no modeļa.</span><span class="sxs-lookup"><span data-stu-id="a61c0-212">A negative influence means the corresponding feature has counter-intuitive influence on the outcome and should be removed from the model.</span></span> <span data-ttu-id="a61c0-213">Pozitīva ietekme norāda uz to, ka līdzeklim ir pamatīgs pienesums prognozei.</span><span class="sxs-lookup"><span data-stu-id="a61c0-213">A positive influence indicates the feature is contributing heavily towards the prediction.</span></span> <span data-ttu-id="a61c0-214">Šīs vērtības nav korelācijas koeficienti, jo tie ir cita metrika.</span><span class="sxs-lookup"><span data-stu-id="a61c0-214">These values aren't correlation coefficients as they are different metrics.</span></span> <span data-ttu-id="a61c0-215">Papildinformāciju skatiet tēmā [Permutāciju līdzekļa svarīgums](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span><span class="sxs-lookup"><span data-stu-id="a61c0-215">For more information, see [Permutation Feature Importance](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span></span>

<span data-ttu-id="a61c0-216">Viss [zuduma eksperiments ir pieejams Azure AI galerijā](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span><span class="sxs-lookup"><span data-stu-id="a61c0-216">The entire [churn experiment is available in the Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span></span>

## <a name="customer-lifetime-value-prediction"></a><span data-ttu-id="a61c0-217">Klienta ilgtermiņa vērtības prognoze</span><span class="sxs-lookup"><span data-stu-id="a61c0-217">Customer lifetime value prediction</span></span>

<span data-ttu-id="a61c0-218">Klienta ilgtermiņa vērtības (CLTV) aprēķins ir viena no galvenajām metrikām, kuru uzņēmums var izmantot, lai novērtētu un segmentētu savus klientus.</span><span class="sxs-lookup"><span data-stu-id="a61c0-218">The customer lifetime value (CLTV) calculation is one of the key metrics that a business can use to assess and segment its customers.</span></span> <span data-ttu-id="a61c0-219">Viesnīcu uzņēmējdarbībā ir būtiski pazīt savus klientus.</span><span class="sxs-lookup"><span data-stu-id="a61c0-219">For the hotel business, it’s critical to know their customers.</span></span> <span data-ttu-id="a61c0-220">Piemēram, izpratne par faktoriem, kas veido labus klientus, ir būtiska informācija.</span><span class="sxs-lookup"><span data-stu-id="a61c0-220">For example, understanding factors that make up good customers is crucial information.</span></span> <span data-ttu-id="a61c0-221">Tā palīdz viesnīcu vadībai novērtēt, uz kuriem līdzekļiem ir jākoncentrējas un kuri ir jāuzlabo, lai apmierinātu labi maksājošos klientus.</span><span class="sxs-lookup"><span data-stu-id="a61c0-221">It helps the hotel management assess which features they need to focus on and improve to satisfy their high paying customers.</span></span> <span data-ttu-id="a61c0-222">Šiem lēmumiem var būt tieša ietekme uz pārdošanu un peļņu.</span><span class="sxs-lookup"><span data-stu-id="a61c0-222">These decisions can have a direct impact on sales and earnings.</span></span>  

### <a name="definition-of-cltv"></a><span data-ttu-id="a61c0-223">CLTV definīcija</span><span class="sxs-lookup"><span data-stu-id="a61c0-223">Definition of CLTV</span></span>

<span data-ttu-id="a61c0-224">Šajā piemērā mēs definējam klienta CLTV kā kopējo dolāra summu, kuru klients, paredzams, iztērēs nākamo 365 dienu laikā.</span><span class="sxs-lookup"><span data-stu-id="a61c0-224">For this example, we define the CLTV of a customer as the total dollar amount the customer is expected to spend in the next 365 days.</span></span> <span data-ttu-id="a61c0-225">Mēs izmantosim pēdējo triju gadu datus par visiem klientiem, lai prognozētu šo vērtību.</span><span class="sxs-lookup"><span data-stu-id="a61c0-225">We are going to use the past three years’ worth of data for all customers to predict this value.</span></span>

### <a name="featurization"></a><span data-ttu-id="a61c0-226">Līdzekļu izmantošana</span><span class="sxs-lookup"><span data-stu-id="a61c0-226">Featurization</span></span>

<span data-ttu-id="a61c0-227">Šajā gadījumā līdzekļu izmantošana būs diezgan līdzīga kā zuduma scenārijā.</span><span class="sxs-lookup"><span data-stu-id="a61c0-227">In this case, featurization is going to be quite like the churn scenario.</span></span> <span data-ttu-id="a61c0-228">Taču etiķetes un prognozētās vērtības atšķiras no augstāk noteiktajām.</span><span class="sxs-lookup"><span data-stu-id="a61c0-228">However, the labels and predicted values are different than defined above.</span></span>

### <a name="model-selection"></a><span data-ttu-id="a61c0-229">Modeļa atlase</span><span class="sxs-lookup"><span data-stu-id="a61c0-229">Model selection</span></span>

<span data-ttu-id="a61c0-230">CLTV prognozēšana ir regresijas problēma, jo prognozētā vērtība ir pozitīvi novērtēts nepārtraukts mainīgais.</span><span class="sxs-lookup"><span data-stu-id="a61c0-230">Predicting the CLTV is a regression problem as the predicted value is a positive valued continuous variable.</span></span> <span data-ttu-id="a61c0-231">Pamatojoties uz līdzekļa iespējām, atlasām **Paātrināta lēmumu koku regresiju** kā vienu algoritmu un **Neironu tīkla regresiju** kā otru algoritmu modeļa apmācīšanai.</span><span class="sxs-lookup"><span data-stu-id="a61c0-231">Based on the feature properties, we select **Boosted Decision Tree Regression** as one algorithm and **Neural Network Regression** as another algorithm to train the model.</span></span>

## <a name="product-recommendation-or-next-best-action"></a><span data-ttu-id="a61c0-232">Produkta ieteikums vai nākošā labākā darbība</span><span class="sxs-lookup"><span data-stu-id="a61c0-232">Product recommendation or Next Best Action</span></span>

<span data-ttu-id="a61c0-233">Produkta ieteikums viesnīcas scenārijā tiek interpretēts kā viesnīcas klientiem piedāvāto pakalpojumu ieteikšana.</span><span class="sxs-lookup"><span data-stu-id="a61c0-233">Product recommendation in a hotel scenario is interpreted as recommending services offered by the hotel to the customers.</span></span> <span data-ttu-id="a61c0-234">Mērķis ir atlasīt piemērotos pakalpojumus klientiem tā, lai tiek maksimizēts to lietojums.</span><span class="sxs-lookup"><span data-stu-id="a61c0-234">The objective is to choose the appropriate services for customers so that their usage is maximized.</span></span> <span data-ttu-id="a61c0-235">Tas ir līdzīgs filmu ieteikumiem video straumēšanas pakalpojumu lietotājiem.</span><span class="sxs-lookup"><span data-stu-id="a61c0-235">It’s similar to movie recommendations for video streaming service users.</span></span>

### <a name="definition-of-product-recommendation-or-next-best-action"></a><span data-ttu-id="a61c0-236">Produkta ieteikuma vai nākamās labākās darbības definīcija</span><span class="sxs-lookup"><span data-stu-id="a61c0-236">Definition of Product Recommendation or Next Best Action</span></span>

<span data-ttu-id="a61c0-237">Mēs definējam mērķi kā pakalpojuma lietošanas dolāra summas maksimizēšanu, piedāvājot atbilstošākos pakalpojumus viesnīcas klientiem, atbilstoši viņu interesēm.</span><span class="sxs-lookup"><span data-stu-id="a61c0-237">We define the goal as maximizing the dollar amount of service usage by offering the best matching services to hotel customers according to their interest.</span></span>

### <a name="featurization"></a><span data-ttu-id="a61c0-238">Līdzekļu izmantošana</span><span class="sxs-lookup"><span data-stu-id="a61c0-238">Featurization</span></span>

<span data-ttu-id="a61c0-239">Tāpat kā zuduma modelī, mēs apvienojam viesnīcas ServiceCustomerID ar CustomerID, lai veidotu konsekventus ieteikumus katram CustomerID.</span><span class="sxs-lookup"><span data-stu-id="a61c0-239">Like the churn model, we are joining the hotel ServiceCustomerID with CustomerID in order to build recommendations consistently per CustomerID.</span></span>

![Ieteikumu modeļa līdzekļu izmantošana](media/azure-machine-learning-model-featurization.png)

<span data-ttu-id="a61c0-241">Dati tiek iegūti no trim dažādām entītijām, un līdzekļi tiek atvasināti no tām.</span><span class="sxs-lookup"><span data-stu-id="a61c0-241">The data is sourced from three different entities and features are derived from them.</span></span> <span data-ttu-id="a61c0-242">Ieteikuma problēmas līdzekļu izveidošana atšķiras no zuduma vai CLTV scenārijiem.</span><span class="sxs-lookup"><span data-stu-id="a61c0-242">The featurization for the problem of recommendation is different compared to churn or CLTV scenarios.</span></span> <span data-ttu-id="a61c0-243">Ieteikumu modelim ir nepieciešami ievades dati trīs līdzekļu kopu veidā.</span><span class="sxs-lookup"><span data-stu-id="a61c0-243">The recommendation model needs input data in the form of three sets of features.</span></span>

### <a name="model-selection"></a><span data-ttu-id="a61c0-244">Modeļa atlase</span><span class="sxs-lookup"><span data-stu-id="a61c0-244">Model selection</span></span>

<span data-ttu-id="a61c0-245">Mēs prognozējam produktus vai pakalpojumus, izmantojot algoritmu, ko sauc par **Apmācības Matchbox ieteicēju**, lai apmācītu ieteikumu modeli.</span><span class="sxs-lookup"><span data-stu-id="a61c0-245">We predict products or services by using the algorithm called **Train Matchbox Recommender** to train the recommendation model.</span></span>

![Produkta ieteikuma algoritms](media/azure-machine-learning-model-recommendation-algorithm.png)

<span data-ttu-id="a61c0-247">Trīs ievades porti **Apmācības Matchbox ieteicēja** modelī izmanto apmācību pakalpojuma izmantošanas datus, klienta aprakstu (neobligāti) un pakalpojuma aprakstu.</span><span class="sxs-lookup"><span data-stu-id="a61c0-247">The three input ports for the **Train Matchbox Recommender** model takes in the training service usage data, customer description (optional), and service description.</span></span> <span data-ttu-id="a61c0-248">Ir trīs dažādi veidi, kā novērtēt modeli.</span><span class="sxs-lookup"><span data-stu-id="a61c0-248">There are three different ways of scoring the model.</span></span> <span data-ttu-id="a61c0-249">Viens ir modeļa novērtējums, kurā Normalizētā kumulatīvais pieaugums ar atlaidi (NDCG) tiek aprēķināts, lai sarindotu novērtētos elementus.</span><span class="sxs-lookup"><span data-stu-id="a61c0-249">One is for model evaluation where a Normalized Discounted Cumulative Gain (NDCG) score is calculated to rank the rated items.</span></span> <span data-ttu-id="a61c0-250">Šajā eksperimentā NDCG rezultāts ir 0,97.</span><span class="sxs-lookup"><span data-stu-id="a61c0-250">In this experiment, we have the NDCG score as 0.97.</span></span> <span data-ttu-id="a61c0-251">Pārējās divas opcijas ir novērtēt modeli visā ieteicamā pakalpojuma katalogā vai novērtēt tikai elementus, kurus lietotāji pirms tam nav izmantojuši.</span><span class="sxs-lookup"><span data-stu-id="a61c0-251">The other two options are scoring the model on the entire recommendable service catalog, or scoring only on items that users have not used before.</span></span>

<span data-ttu-id="a61c0-252">Raugoties tālāk ieteikumu izplatīšanā visā pakalpojuma katalogā, mēs pamanām, ka tālrunis, WiFi un kurjers ir galvenie pakalpojumi, kurus ieteikt.</span><span class="sxs-lookup"><span data-stu-id="a61c0-252">Looking further on the distributions of the recommendations on the entire service catalog, we notice that phone, WiFi, and courier are the top services to be recommended.</span></span> <span data-ttu-id="a61c0-253">Tas atbilst tam, ko mēs atklājām pakalpojuma patēriņa datu sadalījumā:</span><span class="sxs-lookup"><span data-stu-id="a61c0-253">This is consistent with what we found from the distributions of the service consumption data:</span></span>

![Ieteikumu modeļa izvade](media/azure-machine-learning-model-output.png)

<span data-ttu-id="a61c0-255">Visam [produkta ieteikuma eksperimentam var piekļūt Azure AI galerijā.](https://gallery.azure.ai/Experiment/Recommendation-4)</span><span class="sxs-lookup"><span data-stu-id="a61c0-255">The entire [product recommendation experiment can be accessed in Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span></span>

## <a name="integrate-custom-models"></a><span data-ttu-id="a61c0-256">Pielāgoto modeļu integrēšana</span><span class="sxs-lookup"><span data-stu-id="a61c0-256">Integrate custom models</span></span>

<span data-ttu-id="a61c0-257">Lai izmantotu šīs prognozes programmā Customer Insights, prognozes ir **jāeksportē** kopā ar klienta ID.</span><span class="sxs-lookup"><span data-stu-id="a61c0-257">To use these predictions in Customer Insights, you need to **export** the predictions along with the customer IDs.</span></span> <span data-ttu-id="a61c0-258">[Eksportējiet tos uz to pašu Azure Blob krātuves vietu](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs), kurā tiek eksportēti avota dati.</span><span class="sxs-lookup"><span data-stu-id="a61c0-258">[Export them to the same Azure Blob storage location](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs) that you export the source data to.</span></span> <span data-ttu-id="a61c0-259">Prognozējošo tīmekļa pakalpojumu var ieplānot tā, lai tas darbotos regulāri un atjauninātu rezultātus.</span><span class="sxs-lookup"><span data-stu-id="a61c0-259">The predictive web service can be scheduled to run regularly and update the scores.</span></span>

<span data-ttu-id="a61c0-260">Pielāgotajā modelī ģenerētos datus var izmantot, lai turpinātu klientu datu bagātināšanu.</span><span class="sxs-lookup"><span data-stu-id="a61c0-260">Data generated by the custom model can be used to further enrich your customer data.</span></span> <span data-ttu-id="a61c0-261">Papildinformācijai skatiet [Pielāgoti algoritmiskās mācīšanās modeļi](custom-models.md).</span><span class="sxs-lookup"><span data-stu-id="a61c0-261">For more information, see [Custom machine learning models](custom-models.md).</span></span>
